import{k as h,a as l,r as m,j as e,N as _,C as u,e as x}from"./index-ecc2254b.js";import{l as j}from"./stripe.esm-ec9a6edf.js";function g(){const n=h(),a=l(s=>s.cart),i=l(s=>s.cartsum);m.useEffect(()=>{const s=a.reduce((t,c)=>{var o;const r=parseInt((o=c.product_details)==null?void 0:o.book_price);return t+r},0);console.log(s,"price"),n({type:"Total_price",payload:s})},[]);const d=j("pk_test_51NytQZSCR13VXk2t4xS5scD4w4R3pGSOYJnkvFd21myYOBWy8Iurot26oRpg03sam9shpg9jePFNk1CQ50LoZvSS00cDpJcctn"),p=async()=>{const s=await x.post("https://edudev-server-1.onrender.com/checkout",{cartItems:a,userId:localStorage.getItem("id")});await(await d).redirectToCheckout({sessionId:s.data.id})};return e.jsxs("div",{className:"checkout_page",children:[e.jsx(_,{}),e.jsxs("header",{className:"checkout_page_header",children:[e.jsx("h1",{className:"checkout_page_header_title",children:"Checkout"}),e.jsxs("span",{className:"checkout_page_header_sub_title",children:["Home/Yourcart/ ",e.jsx("span",{className:"checkout_page_header_sub_sub_title",children:"Checkout"})]})]}),e.jsx("section",{className:"checkout_page_main",children:e.jsx("div",{className:"checkout_page_main_right",children:e.jsxs("section",{className:"final_checkout_details",children:[e.jsx("h1",{className:"final_checkout_details_title",children:"Your Orders"}),e.jsx("div",{className:"final_checkout_details_items",children:Array.isArray(a)&&a.map((s,t)=>{var c,r;return e.jsx(e.Fragment,{children:e.jsxs("span",{className:"item",children:[e.jsx("span",{className:"item_name",children:(c=s.product_details)==null?void 0:c.title}),e.jsxs("span",{className:"item_price",children:["₹",(r=s.product_details)==null?void 0:r.book_price]})]},t)})})}),e.jsxs("div",{className:"subtotal_price",children:[e.jsxs("span",{className:"subtotal_price_item item",children:[e.jsx("span",{className:"title",children:"Sub total"}),e.jsxs("span",{className:"price",children:["₹",i]})]}),e.jsxs("span",{className:"door_step_delivery item",children:[e.jsx("span",{className:"title",children:"Door Step Delivery"}),e.jsx("span",{className:"price",children:"Free"})]}),e.jsxs("span",{className:"order_total item",children:[e.jsx("span",{className:"title",children:"Order total"}),e.jsxs("span",{className:"price",children:["₹",i]})]})]}),e.jsx("button",{className:"proceed_to_checkout",id:"button",onClick:p,children:"Proceed to Checkout"})]})})}),e.jsx(u,{})]})}export{g as default};
