import{r as l,j as e,I as g,N as f,a1 as x,e as d,H as n}from"./index-ecc2254b.js";const v=()=>{const[a,t]=l.useState({}),[r,o]=l.useState(!1),[c,p]=l.useState(""),u=async()=>{try{const s=await d.get(`https://edudev-server-1.onrender.com/user_profile?token=${localStorage.getItem("token")}`);t({...s.data}),localStorage.setItem("userdata",s.data.name),console.log(s.data)}catch(s){console.error("Error fetching user data",s)}};l.useEffect(()=>{u()},[]);const m=async()=>{try{const s=new FormData;s.append("dp",c);const i=await d.put("https://edudev-server-1.onrender.com/update_profile_pic?token="+localStorage.getItem("token"),s);i.status==200?(n.success("Updated profile pic successfully "),t(i.data),localStorage.setItem("userdata",i.data.name),p("")):n.error("SOmething went wrong while updating profile pic")}catch(s){console.log("error",s),n.error("SOmething went wrong while updating profile pic")}},h=async()=>{try{if(a.email!==""&&a.name!==""&&a.Addresses!==""&&a.profession!==""){const s=await d.put("https://edudev-server-1.onrender.com/update_profile?token="+localStorage.getItem("token"),a);c!==""?m():(s.status===200?(t({...s.data}),localStorage.setItem("userdata",s.data.name),n.success("Successfully updated (:"),o(!1)):n.error("Internal server error occured "),console.log(s.data,"data"))}else n.error("fill all the details")}catch(s){console.error("Error updating user data",s),o(!1),n.error("something went wrong")}};return e.jsxs("div",{className:"user_profile",children:[e.jsx(g,{}),e.jsx(f,{}),e.jsx("h2",{children:"User Profile"}),e.jsx("div",{className:"user_details",children:a?e.jsxs(e.Fragment,{children:[e.jsx("img",{className:"user_dp",src:a.dp,alt:"profile_pic"}),r?e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"file",children:e.jsx(x,{className:"userUpdateIcon"})}),e.jsx("input",{type:"file",id:"file",accept:"image/*",name:"dp",style:{display:"none"},onChange:s=>{p(s.target.files[0])}})]}):"",e.jsxs("div",{className:"input_divs",children:[e.jsxs("div",{className:"input_item",children:[e.jsx("label",{children:" Your Name"}),r?e.jsx("input",{type:"text",name:"name",value:a.name,onChange:s=>{t({...a,name:s.target.value})}}):e.jsx("span",{className:"field_values",children:a.name})]}),e.jsxs("div",{className:"input_item",children:[e.jsx("label",{children:" Profession or Work"}),r?e.jsx("input",{type:"text",name:"profession",value:a.profession,onChange:s=>{t({...a,profession:s.target.value})}}):e.jsx("span",{children:a.profession})]}),e.jsxs("div",{className:"input_item",children:[e.jsx("label",{children:"Your Address"}),r?e.jsx("textarea",{type:"text",name:"Addresses",value:a.Addresses,onChange:s=>{t({...a,Addresses:s.target.value})}}):e.jsxs("span",{children:[" ",a.Addresses]})]}),e.jsxs("div",{className:"input_item",children:[e.jsx("label",{children:" Your Email"}),r?e.jsx("input",{type:"email",name:"email",value:a.email,onChange:s=>{t({...a,email:s.target.value})}}):e.jsx("span",{children:a.email})]}),e.jsx("button",{id:"button",onClick:()=>{r?h():o(!0)},children:r?"Save":"Edit"})]})]}):"Loading..."})]})};export{v as default};
