import{r as h,k as m,j as a,J as u,b as x,a as _,N as j,C as g,e as N}from"./index-ecc2254b.js";function y({id:o,item_pic:r,item_name:d,item_owner:e,item_price:n}){const[s,c]=h.useState(1),i=m(),l=()=>{i({type:"remove_from_cart",payload:o})};return a.jsxs("div",{className:"cart_page_item",children:[a.jsx("div",{className:"item_img_div",children:a.jsx("img",{src:r,width:"100%",height:"100%",style:{borderRadius:"10px"},alt:"cart_prodcut_img"})}),a.jsxs("div",{className:"item_info",children:[a.jsx("span",{className:"item_name",children:d}),a.jsx("span",{className:"item_owner",children:e})]}),a.jsx("div",{className:"item_price",children:a.jsxs("span",{className:"price",children:["$",n]})}),a.jsxs("div",{className:"item_quantity",children:[a.jsx("span",{className:"quantity_number",children:s}),a.jsxs("span",{className:"quantity_changer",children:[a.jsx("span",{className:"up",onClick:()=>c(t=>t+1),children:"^"}),a.jsx("span",{className:"down",onClick:()=>{c(s===1?1:t=>t-1)},children:"Ë…"})]})]}),a.jsx("div",{className:"total_amount",children:a.jsxs("span",{style:{color:"coral"},className:"total_quantity_amount",children:["$ ",s*n]})}),a.jsx("span",{onClick:l,children:a.jsx(u,{sx:{color:"coral"}})})]})}function f(){const o=x(),r=m();async function d(){try{const s=await N.get("https://edudev-server-1.onrender.com/get_user_cart_wishlist?token="+localStorage.getItem("token"));if(s.status===200){r({type:"User_cart_wishlist",payload:s.data}),r({type:"Update_cart_length",payload:Array.isArray(s.data)?s.data.length:0});const c=s.data.cart.reduce((i,l)=>{var p;const t=parseFloat((p=l.product_details)==null?void 0:p.book_price);return i+t},0);console.log(c,"price"),r({type:"Total_price",payload:c}),console.log(s.data)}else console.log("error occured while reaching or fetching api ")}catch(s){console.log(s)}}h.useEffect(()=>{d()},[r]);const e=_(s=>s.cart),n=_(s=>s.cartsum);return console.log(e),a.jsxs("div",{className:"cart_page",children:[a.jsx(j,{}),a.jsxs("header",{className:"cart_page_header",children:[a.jsx("h1",{className:"cart_main_title",children:"Cart Page"}),a.jsxs("span",{className:"cart_sub_title",children:["Home/",a.jsx("span",{className:"cart_sub_sub_title",children:"Cart Page"})]})]}),Array.isArray(e)&&e.length!==0?a.jsxs(a.Fragment,{children:[Array.isArray(e)&&e.length>0&&e.map((s,c)=>{var i,l,t;return s&&a.jsx(y,{id:s._id,item_name:(i=s.product_details)==null?void 0:i.title,item_owner:"trusted partner",item_pic:(l=s.product_details)==null?void 0:l.book_pics[0],item_price:(t=s.product_details)==null?void 0:t.book_price},s._id)}),a.jsx("section",{className:"cart_page_main"}),a.jsxs("footer",{className:"cart_page_footer",children:[a.jsxs("section",{className:"coupon_apply_div",children:[a.jsx("input",{className:"coupon_input",type:"text",placeholder:" Enter Coupon Code"}),a.jsx("button",{className:"apply_coupon_button",id:"button",children:"Apply Coupon"})]}),a.jsxs("section",{className:"cart_totals",children:[a.jsx("h1",{className:"cart_totals_head_title",children:"Cart Totals"}),a.jsxs("div",{className:"subtotal",children:[a.jsx("span",{className:"header_title",children:"Subtotal"}),a.jsxs("span",{className:"total_price",children:["$ ",n]})]}),a.jsxs("div",{className:"shipping",children:[a.jsx("span",{className:"header_title",children:"Shipping"}),a.jsx("span",{className:"shipping_info",children:"Free"})]}),a.jsxs("div",{className:"grandtotal",children:[a.jsx("span",{className:"header_title",children:"Total"}),a.jsxs("span",{className:"total_price",children:["$ ",n]})]}),a.jsx("button",{className:"proceed_button",id:"button",onClick:()=>o("/yourcart/checkout"),children:"Proceed to Checkout"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{style:{color:"black",margin:"0 auto",fontSize:"29px",fontWeight:"800"},children:"No items in your cart :))"}),a.jsx("img",{width:"80%",height:"400px",style:{margin:"0 auto"},src:"https://fatafatsewa.com/website/images/emptycart.png",alt:"cart_empty"})]}),a.jsx(g,{})]})}export{f as default};
