import{c as m,j as e,I as y,e as l,_ as o,r as d,u as b,b as f,N,f as j,T as w,d as v}from"./index-ecc2254b.js";const k=m(e.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonthOutlined"),C=m(e.jsx("path",{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"}),"FacebookRounded"),z=m(e.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram"),S=m(e.jsx("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66zM18 18H6v-.78c0-.38.2-.72.52-.88C7.71 15.73 9.63 15 12 15c2.37 0 4.29.73 5.48 1.34.32.16.52.5.52.88V18zm-8-6h4c1.66 0 3-1.34 3-3 0-.73-.27-1.4-.71-1.92.13-.33.21-.7.21-1.08 0-1.25-.77-2.32-1.86-2.77C14 2.48 13.06 2 12 2s-2 .48-2.64 1.23C8.27 3.68 7.5 4.75 7.5 6c0 .38.08.75.21 1.08C7.27 7.6 7 8.27 7 9c0 1.66 1.34 3 3 3zm-.76-3.63c.87-1.04.26-2 .26-2.37 0-.41.24-.77.62-.92.29-.12.55-.31.75-.54.17-.21.55-.54 1.13-.54s.96.33 1.13.53c.2.24.46.42.75.54.38.16.62.52.62.93 0 .37-.61 1.33.26 2.37.58.69.04 1.63-.76 1.63h-4c-.8 0-1.34-.94-.76-1.63z"}),"Person3Outlined"),A=m(e.jsx("path",{d:"M13.12 2.06 7.58 7.6c-.37.37-.58.88-.58 1.41V19c0 1.1.9 2 2 2h9c.8 0 1.52-.48 1.84-1.21l3.26-7.61C23.94 10.2 22.49 8 20.34 8h-5.65l.95-4.58c.1-.5-.05-1.01-.41-1.37-.59-.58-1.53-.58-2.11.01zM3 21c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2s-2 .9-2 2v8c0 1.1.9 2 2 2z"}),"ThumbUpAltRounded");function I({blogid:c,set_data:h,data:t,id:i,img:r,name:g,posted_date:x,commented_text:u,likes:_,liked_people:p}){async function s(){try{const a=await l.get("https://edudev-server-1.onrender.com/load_comments?blogId="+c);a.status===200?h({...t,comments:a.data}):o.error("comments loading failed..")}catch(a){console.log(a)}}async function n(){try{if(localStorage.getItem("userdata")!==null&&localStorage.getItem("token"))if((await l.patch(`https://edudev-server-1.onrender.com/add_like_to_comment?id=${i}&token=${localStorage.getItem("token")}`)).status===201)s(),o.success("Action done successfully");else throw o.error("Action was not stored"),new Error("Bad response");else o.error("please login to like")}catch(a){console.log(a),o.error("like is not done")}}return e.jsxs("div",{className:"comment_temp",children:[e.jsx(y,{position:"bottom-right"}),e.jsxs("section",{className:"commenter_info",children:[e.jsx("div",{className:"commenter_info_profile",children:e.jsx("img",{src:r,width:"100%",style:{objectFit:"cover",borderRadius:"100%"},height:"100%",alt:"commenter_profile"})}),e.jsxs("div",{className:"commenter_info_details",children:[e.jsx("span",{className:"commneter_info_details_name",style:{fontSize:"15px",fontWeight:"700"},children:g}),e.jsx("span",{className:"commenter_info_details_posted_date",style:{fontSize:"12px",opacity:"0.7"},children:x})]})]}),e.jsx("section",{className:"commented_text",children:e.jsx("p",{style:{textAlign:"justify"},children:u})}),e.jsx("section",{className:"comment_reactions",children:e.jsxs("span",{className:"like_button",onClick:n,style:{display:"flex",alignItems:"center",opacity:"0.8",cursor:"pointer"},children:[e.jsx(A,{color:Array.isArray(p)&&p.includes(localStorage.getItem("id"))?"primary":""})," ",_,e.jsx("span",{style:{textAlign:"center",alignItems:"center",opacity:"0.8",marginLeft:"8px"},children:"Like"})]})})]})}function M(){const[c,h]=d.useState(""),[t,i]=d.useState(null),{id:r}=b(),[g,x]=d.useState([]),u=f();d.useEffect(()=>{async function s(){await l.get("https://edudev-server-1.onrender.com/fetchOneblog?id="+r).then(n=>{i(n.data)}).catch(n=>console.log(n))}s()},[r]),d.useEffect(()=>{async function s(){await l.get("https://edudev-server-1.onrender.com/blogs?limit=4").then(n=>{x(n.data)}).catch(n=>console.log(n))}s()},[]);async function _(){try{const s=await l.get("https://edudev-server-1.onrender.com/load_comments?blogId="+r);s.status===200?i({...t,comments:s.data}):o.error("comments loading failed..")}catch(s){console.log(s)}}const p=async()=>{try{c!==""?(await l.post(`https://edudev-server-1.onrender.com/writeComment?token=${localStorage.getItem("token")}&blogId=${t._id}`,{commented_content:c})).status==201?(o.success("comment added successfully"),h(""),_()):o.error("comment is not added , try again !"):o.error("fill the comment before posting")}catch(s){console.log(s),o.error("internal sever error occured")}};return e.jsxs("div",{className:"blogviewer",children:[e.jsx(N,{}),e.jsx(y,{position:"bottom-right"}),e.jsxs("section",{className:"blogviewer_main_headings",children:[e.jsx("span",{className:"main_heading",style:{color:"black",fontSize:"22px",fontWeight:"700",marginBottom:"10px"},children:"Blogs Details"}),e.jsxs("span",{className:"sub_heading",children:["Home/",e.jsx("span",{style:{color:"coral"},children:"Blog"})]})]}),t&&e.jsxs("div",{className:"blogviewer_main",children:[e.jsxs("div",{className:"blogviewer_left",children:[e.jsx("section",{className:"blogviewer_backdrop",children:e.jsx("img",{width:"100%",height:"100%",style:{objectFit:"fill",borderRadius:"20px"},src:t.backdrop,alt:"blog_Pic"})}),e.jsxs("section",{className:"blogviewer_left_headings",children:[e.jsx("span",{className:"blog_heading",style:{fontSize:"20px",fontWeight:"700"},children:t.name}),e.jsxs("div",{className:"blog_posting_details",children:[e.jsxs("span",{style:{textAlign:"center",display:"flex",alignItems:"center"},children:[e.jsx(S,{})," By ",t.author.name," "]}),e.jsxs("span",{style:{textAlign:"center",display:"flex",alignItems:"center",fontSize:"12px"},children:[e.jsx(k,{}),j(new Date(t.posted_Date),"dd eeee yyyy")]})]})]}),e.jsx("section",{className:"blogviewer_blog_details",children:e.jsxs("p",{style:{textAlign:"justify",opacity:".8",padding:"6px"},children:["Lo",e.jsx("div",{dangerouslySetInnerHTML:{__html:t.content.slice(0,t.content.length-300)}})]})}),e.jsx("section",{className:"blogviewer_main_blog_details",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.content.slice(t.content.length-300,t.content.length)}})}),e.jsxs("footer",{className:"blogviewer_left_end_options",children:[e.jsxs("div",{className:"blogviewer_left_end_sharing",children:[e.jsx("span",{style:{color:"black",fontSize:"17px",fontWeight:"400",marginRight:"30px"},children:"Social Share"}),e.jsx("span",{className:"facebook_share",children:e.jsx(C,{})}),e.jsx("span",{className:"twitter_share",children:e.jsx(w,{})}),e.jsx("span",{className:"linkedin_share",children:e.jsx(z,{})})]}),e.jsx("div",{className:"blogviewer_left_end_tagscloud",children:t.categories.length>0?t.categories.map((s,n)=>e.jsx("button",{id:"button",style:{backgroundColor:"coral",color:"white",border:"none",width:"auto",height:"40px"},children:s},n)):" loading..."})]}),e.jsx("span",{style:{color:"black",fontSize:"17px",fontWeight:"700",marginRight:"30px",marginTop:"20px"},children:"Recent Comments"}),e.jsxs("div",{className:"Add_comment_box",children:[e.jsx("input",{className:"comment_input",type:"text",value:c,onChange:s=>h(s.target.value),placeholder:"write your comment"}),e.jsx("button",{className:"comment_submit_button",type:"button",onClick:p,children:"Post"})]}),Array.isArray(t.comments)&&t.comments.map(s=>e.jsx(I,{name:s.commenter_details.name,blogid:t._id,set_data:i,data:t,liked_people:s.liked_users,id:s._id,likes:s.likes,commented_text:s.commented_content,posted_date:j(new Date(s.createdAt),"dd eeee yyyy"),img:s.commenter_details.dp},s._id)),Array.isArray(t.comments)&&t.comments.length===0&&"No comments till now"]}),e.jsxs("div",{className:"blogviewer_right",children:[e.jsxs("section",{className:"categories",children:[e.jsx("span",{style:{color:"black",fontWeight:"700",fontSize:"18px"},children:"Categories"}),e.jsx("div",{className:"categories_list",children:t.categories.length>0?t.categories.map((s,n)=>e.jsx("li",{className:"categoty_item",children:s},n)):" loading..."})]}),e.jsxs("section",{className:"popular_posts",children:[e.jsx("h2",{children:"Popular Posts"}),e.jsx("div",{className:"all_popular_posts",children:g.length!==0?g.map((s,n)=>{if(s._id!=t._id)return e.jsxs("div",{className:"post",onClick:()=>u("/selectedblog/"+s._id),children:[e.jsx("div",{className:"post_pic",children:e.jsx("img",{src:s.backdrop,width:"100%",height:"100%",style:{objectFit:"cover",borderRadius:"8px"},alt:"post_profile"})}),e.jsxs("div",{className:"post_details",children:[e.jsxs("p",{className:"About_post",children:[s.name," "]}),e.jsxs("small",{children:["Posted on ",j(new Date(s.posted_Date),"MM-dd-yyyy")," "]})]})]},n)}):e.jsx(v,{})})]}),e.jsxs("section",{className:"tags_cloud",children:[e.jsx("span",{style:{color:"black",fontWeight:"700",fontSize:"18px"},children:"Tags Cloud"}),e.jsx("div",{className:"all_buttons",children:t.Tags.length>0?t.Tags.map((s,n)=>e.jsx("button",{id:"button",children:s},n)):" loading..."})]}),e.jsxs("section",{className:"news_letter_mail",children:[e.jsx("p",{className:"news_letter_headline",children:"Get the latest post & article in your email"}),e.jsx("input",{className:"email_input",type:"email",placeholder:"Enter your Email address"}),e.jsx("button",{id:"button",className:"subscribe_button",children:"Subscribe"})]})]})]}),e.jsx("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:t===null?e.jsx(v,{}):""})]})}export{M as default};
